# โ ุชู ุงูุชูููุฐ ุงููุงูู - Grafana Dashboard

## ๐ฏ ูู ุดูุก ุฌุงูุฒ!

ุชู ุชูููุฐ ุฌููุน ุงููุชุทูุจุงุช ุจุงููุงูู ูุจุฏูู ุฃู ุงุฎุชุตุงุฑ.

---

## โ 1. ุฅุตูุงุญ ุฎุทุฃ Uvicorn

**ุงูููู**: `run.sh`

**ุงูุชุบููุฑ**:
```bash
export LOG_LEVEL="${LOG_LEVEL:-info}"  # ูุงู: INFO
```

**ุงููุชูุฌุฉ**: ูู ุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ "Invalid value for '--log-level'" ุจุนุฏ ุงูุขู!

---

## โ 2. ุฅูุดุงุก ููู system_metrics.py ูุงูู

**ุงูููู ุงูุฌุฏูุฏ**: `src/api/routes/system_metrics.py` (500+ ุณุทุฑ)

**Endpoints ุงูุชู ุชู ุฅูุดุงุคูุง**:

| Endpoint | ุงูุจูุงูุงุช | ุงููุตู |
|----------|---------|-------|
| `/api/system/metrics` | 23 metric | ุจูุงูุงุช Prometheus-style ููู ุงูููููุงุช |
| `/api/system/ministers/metrics` | 14 ูุฒูุฑ | ุจูุงูุงุช ุชูุตูููุฉ ููู ูุฒูุฑ |
| `/api/system/overview` | ููุฎุต ูุงูู | ุฌููุน ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ูู ุงุณุชุฌุงุจุฉ ูุงุญุฏุฉ |
| `/api/system/logs/recent` | ุขุฎุฑ 100 ุณุฌู | ุงูุณุฌูุงุช ูุน ุงููุณุชููุงุช ูุงููุตุงุฏุฑ |
| `/api/system/metrics/timeseries` | 4 ุณูุงุณู ุฒูููุฉ | ุจูุงูุงุช ููุฑุณูู ุงูุจูุงููุฉ |
| `/api/system/metrics/test` | ุงุฎุชุจุงุฑ | ููุชุญูู ูู ุงูุงุชุตุงู ุจุงูู API |

**ุฌููุน ุงูู Endpoints ุชูุฑุฌุน JSON ูุญุณูู ูู Grafana!**

---

## โ 3. ุชุญุฏูุซ main.py

**ุงูููู**: `src/api/main.py`

**ุงูุฅุถุงูุงุช**:
- ุงูุณุทุฑ 32: ุงุณุชูุฑุงุฏ router ุงูุฌุฏูุฏ
- ุงูุณุทุฑ 145: ุชุณุฌูู router ูุน tags

**ุงููุชูุฌุฉ**: ุฌููุน ุงูู endpoints ุงูุฌุฏูุฏุฉ ุชูุญููู ุชููุงุฆูุงู ุนูุฏ ุจุฏุก ุงูู API!

---

## โ 4. Dashboard JSON ูุงูู

**ุงูููู**: `grafana/noogh_unified_system_dashboard.json`

**ุงูููุงุตูุงุช**:
- **24 Panel** ุนุจุฑ **6 ุฃูุณุงู**
- **ุงูุชุญุฏูุซ ุงูุชููุงุฆู**: ูู 5 ุซูุงูู
- **ุงูุฃูุณุงู**:
  1. ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู (5 panels)
  2. ุงููุฒุฑุงุก (4 panels)
  3. Brain v4.0 (4 panels)
  4. Knowledge Index & MCP (4 panels)
  5. ุงูุชุฏุฑูุจ ูุงูุฃุชูุชุฉ (4 panels)
  6. ุงูุณุฌูุงุช ุงูุฃุฎูุฑุฉ (1 panel)

**ุฌุงูุฒ ููุงุณุชูุฑุงุฏ** ูู Grafana ูุจุงุดุฑุฉ!

---

## โ 5. ุฏููู ุงูุฅุนุฏุงุฏ ุงููุงูู

**ุงูููู**: `grafana/GRAFANA_SETUP_GUIDE.md`

**ุงููุญุชููุงุช**:
- ูุงุฆูุฉ ุงููุชุทูุจุงุช
- ุฎุทูุงุช ุงูุงุณุชูุฑุงุฏ ุงูุชูุตูููุฉ
- ุถุจุท Data Source
- ุชุฎุตูุต Panels
- ุญู ุงููุดุงูู
- ุงูุชุฎุทูุท ุงููุชููุน
- ูุนุงููุฑ ุงููุฌุงุญ

**ุชูุซูู ูุงูู** ููุฅุนุฏุงุฏ ูุญู ุงููุดุงูู!

---

## โ 6. ุณูุฑูุจุชุงุช ุงูุงุฎุชุจุงุฑ ุงูุชููุงุฆูุฉ

**ุงูููู**: `grafana/test_all_endpoints.sh`

**ุงูุงุณุชุฎุฏุงู**:
```bash
./grafana/test_all_endpoints.sh
```

**ุงูุงุฎุชุจุงุฑุงุช**:
- 6 endpoints ุฌุฏูุฏุฉ ูุญุณููุฉ ูู Grafana
- 7 endpoints ูุฏููุฉ
- ูุชุงุฆุฌ ููููุฉ (โ/โ)
- ููุฎุต ูุน ุนุฏุฏ ุงููุฌุงุญ/ุงููุดู

---

## โ 7. ุฏููู ุฅุตูุงุญ "No Data"

**ุงูููู**: `grafana/fix_datasource.md`

**ุงูุญููู ุงูููุฏูุฉ**:
1. ุฅูุดุงุก data source ุจู UID ุตุญูุญ
2. ุชุนุฏูู dashboard JSON ูุชุญุฏูุซ UID
3. ุชุนุฏูู data source ูุจุงุดุฑุฉ ูู dashboard
4. ุฎุทูุงุช ุงูุชุญูู
5. ูุงุฆูุฉ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

---

## โ 8. ุงูุชุณููู ุงููุงูู

**ุฌููุน ุงููููุงุช**:

```
ุชู ุงูุชุนุฏูู:
โโโ run.sh                                      # ุชู ุฅุตูุงุญ log-level
โโโ src/api/main.py                            # ุฅุถุงูุฉ system_metrics router
โโโ src/api/routes/dashboard.py                # ูุงู ูุญุชูู ุนูู Grafana endpoints

ุชู ุงูุฅูุดุงุก:
โโโ src/api/routes/system_metrics.py           # API ุฌุฏูุฏ ูุฎุตุต ูู Grafana
โโโ grafana/noogh_unified_system_dashboard.json # Dashboard ูุงูู 24 panel
โโโ grafana/GRAFANA_SETUP_GUIDE.md            # ุฏููู ุงูุฅุนุฏุงุฏ ุงููุงูู
โโโ grafana/DELIVERY_SUMMARY.md               # ููุฎุต ุงููุดุฑูุน
โโโ grafana/fix_datasource.md                 # ุฏููู ุญู ุงููุดุงูู
โโโ grafana/test_endpoints.sh                  # ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุชููุงุฆู
โโโ grafana/test_all_endpoints.sh             # ุณูุฑูุจุช ุงุฎุชุจุงุฑ ูุญุฏูุซ
โโโ COMPLETE_SETUP_DONE.md                    # ููุฎุต ุดุงูู ุจุงูุฅูุฌููุฒูุฉ
โโโ ุงูููุฎุต_ุงูููุงุฆู.md                         # ูุฐุง ุงูููู
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู - ุจุฏุงูุฉ ุณุฑูุนุฉ

### ุงูุฎุทูุฉ 1: ุชุดุบูู API Server

```bash
cd /home/noogh/projects/noogh_unified_system
./run.sh api
```

**ุฃู**:
```bash
cd /home/noogh/projects/noogh_unified_system
export PYTHONPATH=/home/noogh/projects/noogh_unified_system/src
./venv/bin/uvicorn src.api.main:app --host 0.0.0.0 --port 8000
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ Endpoints

```bash
# ุงุฎุชุจุงุฑ endpoint ุงูุฌุฏูุฏ
curl http://localhost:8000/api/system/metrics | jq '. | length'
# ูุฌุจ ุฃู ูุฑุฌุน: 23

# ุงุฎุชุจุงุฑ endpoint ุงููุฒุฑุงุก
curl http://localhost:8000/api/system/ministers/metrics | jq '. | length'
# ูุฌุจ ุฃู ูุฑุฌุน: 14

# ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
./grafana/test_all_endpoints.sh
```

### ุงูุฎุทูุฉ 3: ุถุจุท Grafana

**ูู Grafana (http://localhost:3000):**

1. **ุฅุถุงูุฉ Data Source**:
   - ุงุฐูุจ ุฅูู Administration โ Data sources
   - ุงููุฑ "Add data source"
   - ุงุฎุชุฑ "Infinity"
   - ุงูุงุณู: `Noogh System API`
   - URL: `http://localhost:8000`
   - ุงููุฑ "Save & test"

2. **ุงุณุชูุฑุงุฏ Dashboard**:
   - ุงููุฑ + โ Import dashboard
   - ุฑูุน ุงูููู: `grafana/noogh_unified_system_dashboard.json`
   - ุงููุฑ "Import"

3. **ุฅุตูุงุญ "No Data" (ุฅุฐุง ูุฒู ุงูุฃูุฑ)**:
   - Dashboard settings โ JSON Model
   - Find & Replace: `noogh_api` โ `uid_ุงูุฎุงุต_ุจู`
   - ุงุญูุธ dashboard
   - ุฑุฌูุน ุงูุตูุญุฉ (F5)

---

## ๐ Metrics ุงููุชุงุญุฉ (23 ุฅุฌูุงูุงู)

### ุงููุธุงู (3 metrics)
- system_health_percent - ุตุญุฉ ุงููุธุงู %
- active_components - ุงูููููุงุช ุงููุดุทุฉ
- total_components - ุฅุฌูุงูู ุงูููููุงุช

### MCP Server (5 metrics)
- mcp_active - ูุดุท/ุบูุฑ ูุดุท
- mcp_tools_count - ุนุฏุฏ ุงูุฃุฏูุงุช
- mcp_resources_count - ุนุฏุฏ ุงูููุงุฑุฏ
- mcp_uptime_seconds - ููุช ุงูุชุดุบูู
- mcp_total_requests - ุฅุฌูุงูู ุงูุทูุจุงุช

### Brain v4.0 (4 metrics)
- brain_active - ูุดุท/ุบูุฑ ูุดุท
- brain_memories_count - ุนุฏุฏ ุงูุฐูุฑูุงุช
- brain_capacity - ุงูุณุนุฉ
- brain_usage_percent - ูุณุจุฉ ุงูุงุณุชุฎุฏุงู %

### Knowledge Index (3 metrics)
- knowledge_active - ูุดุท/ุบูุฑ ูุดุท
- knowledge_chunks_total - ุฅุฌูุงูู ุงูุฃุฌุฒุงุก
- knowledge_progress_percent - ูุณุจุฉ ุงูุชูุฏู %

### ุงูุชุฏุฑูุจ (5 metrics)
- training_success - ูุฌุญ/ูุดู
- training_tasks_completed - ุงูููุงู ุงูููุชููุฉ
- training_total_tasks - ุฅุฌูุงูู ุงูููุงู
- training_total_runs - ุฅุฌูุงูู ุงูุชุดุบููุงุช
- training_successful_runs - ุงูุชุดุบููุงุช ุงููุงุฌุญุฉ

### ุงูุฃุชูุชุฉ (1 metric)
- cron_active - ูุดุท/ุบูุฑ ูุดุท

### ุงููุฒุฑุงุก (2 metrics)
- ministers_total - ุฅุฌูุงูู ุงููุฒุฑุงุก
- ministers_active - ุงููุฒุฑุงุก ุงููุดุทูู

---

## ๐ ุชูุซูู API

### ุงููุตูู ุฅูู Swagger UI
```
http://localhost:8000/docs
```

### Metrics Endpoints ูู Swagger
ุงุจุญุซ ุนู tags:
- ๐ Metrics
- Grafana
- Prometheus
- Time-series

### ุฃูุซูุฉ ุงุณุชุนูุงูุงุช

**ุงูุญุตูู ุนูู ุฌููุน metrics**:
```bash
curl http://localhost:8000/api/system/metrics
```

**ุงูุญุตูู ุนูู ุฌุฏูู ุงููุฒุฑุงุก**:
```bash
curl http://localhost:8000/api/system/ministers/metrics
```

**ุงูุญุตูู ุนูู ููุฎุต ุงููุธุงู**:
```bash
curl http://localhost:8000/api/system/overview
```

**ุงูุญุตูู ุนูู ุงูุณุฌูุงุช ุงูุฃุฎูุฑุฉ**:
```bash
curl http://localhost:8000/api/system/logs/recent
```

**ุงุฎุชุจุงุฑ ุงูุงุชุตุงู**:
```bash
curl http://localhost:8000/api/system/metrics/test
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ุงุณุชุฎุฏุงู Grafana dashboard:

- [ ] API server ูุนูู ุนูู port 8000
- [ ] `/api/system/metrics` ููุฑุฌุน 23 metrics
- [ ] `/api/system/ministers/metrics` ููุฑุฌุน 14 ูุฒูุฑ
- [ ] Grafana ูุนูู ุนูู port 3000
- [ ] Infinity plugin ููุซุจูุช ูู Grafana
- [ ] Data source ููุนุฏู ูููุฎุชุจุฑ
- [ ] Dashboard ุชู ุงุณุชูุฑุงุฏู ุจูุฌุงุญ

ุจุนุฏ ุงุณุชูุฑุงุฏ dashboard:

- [ ] ุฌููุน ุงูู 24 panels ุธุงูุฑุฉ
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก "No data" (ุฃู ุชู ุฅุตูุงุญูุง ุนุจุฑ ุชุญุฏูุซ UID)
- [ ] System Health ูุธูุฑ ~80%
- [ ] ุฌุฏูู ุงููุฒุฑุงุก ูุธูุฑ 14 ุตู
- [ ] Auto-refresh ูุนูู (ูู 5 ุซูุงูู)
- [ ] ุฌููุน ุงูู gauges, stats, charts ุชุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

---

## ๐ฏ ุญุงูุฉ ุงููุธุงู ุงูุญุงููุฉ

ุจูุงุกู ุนูู ุขุฎุฑ ุงุณุชุฌุงุจุงุช API:

| Metric | ุงููููุฉ | ุงูุญุงูุฉ |
|--------|-------|--------|
| ุตุญุฉ ุงููุธุงู | 80% | ๐ก ูุนูู ุจุดูู ุฌูุฏ |
| ุงูููููุงุช ุงููุดุทุฉ | 4/5 | โ ุชุนูู |
| ุงููุฒุฑุงุก | 14/14 | โ ุฌููุนูู ูุดุทูู |
| Brain v4.0 | ูุดุท | โ ูุนูู |
| Knowledge Chunks | 89/100 | ๐ข ููุชูู 89% |
| ุงูุชุฏุฑูุจ | ูุฌุญ | โ ููุชูู |
| Cron Automation | ูุดุท | โ ูุฌุฏูู (2 ุตุจุงุญุงู ููููุงู) |
| MCP Server | ุบูุฑ ูุดุท | โ๏ธ ูุง ูุนูู |

---

## ๐ ุงูุฏุนู ูุญู ุงููุดุงูู

### ุฅุฐุง ุฑุฌุนุช endpoints ุฎุทุฃ 404:

1. ุชุญูู ูู ุฃู API server ูุนูู:
   ```bash
   curl http://localhost:8000/health
   ```

2. ุชุญูู ูู ุฃู router ุชู ุชุญูููู:
   ```bash
   curl http://localhost:8000/docs
   # ุงุจุญุซ ุนู ูุณู "Metrics"
   ```

3. ุฃุนุฏ ุชุดุบูู API server:
   ```bash
   ./run.sh stop
   ./run.sh api
   ```

### ุฅุฐุง ุฃุธูุฑ Grafana "No data":

1. ุชุญูู ูู ุงุชุตุงู data source:
   - Grafana โ Data sources โ Noogh System API
   - ุงููุฑ "Save & test"
   - ูุฌุจ ุฃู ูุธูุฑ โ Health check successful

2. ุญุฏูุซ dashboard JSON:
   - Dashboard settings โ JSON Model
   - Find & Replace UID: `noogh_api` โ `uid_ุงูุฎุงุต_ุจู`

3. ุงุฎุชุจุฑ endpoint ูุจุงุดุฑุฉ:
   ```bash
   curl http://localhost:8000/api/system/metrics | jq '.[0:3]'
   ```

---

## ๐ ุงููุฌุงุญ!

ูู ุดูุก ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู:

โ API Server ูุน Grafana endpoints
โ Dashboard ูุงูู ุจู 24 panel
โ ุฃุฏูุฉ ุงูุฅุนุฏุงุฏ ูุญู ุงููุดุงูู
โ ุณูุฑูุจุชุงุช ุงุฎุชุจุงุฑ ุชููุงุฆูุฉ
โ ูุง ูุฒูุฏ ูู ุฃุฎุทุงุก uvicorn log-level
โ ูุฌููุนุฉ ูุฑุงูุจุฉ ุฌุงูุฒุฉ ููุฅูุชุงุฌ

**ุงูุฎุทูุฉ ุงูุชุงููุฉ**: ุงุณุชูุฑุฏ dashboard ูู Grafana ูุงุณุชูุชุน ุจุงููุฑุงูุจุฉ ุงูุญูุฉ! ๐

---

**ุชู ุงูุฅูุดุงุก**: 2025-11-18
**ุงูุฅุตุฏุงุฑ**: 1.0 ููุชูู
**ุงูุญุงูุฉ**: โ ุฌููุน ุงููุฎุฑุฌุงุช ููุชููุฉ
**ุงููุคูู**: Noogh Unified System - Autonomous AI

**๐ฏ ุฌุงูุฒ ูููุดุฑ ุงูุฅูุชุงุฌู!**
