خطة تنفيذ المراجعة والاختبار للمشروع

المرحلة 1، إعداد البيئة
- إنشاء بيئة افتراضية محلية.
- تثبيت الحزم من requirements.txt.
- إنشاء مجلدات أساسية عند الحاجة، logs و data و models و backups.

المرحلة 2، إعداد المتغيرات
- NOOGH_ENV=development.
- تعيين NOOGH_API_KEYS_JSON بمفتاح اختباري dev-test-key مع صلاحيات النظام الكاملة.
- تعيين CORS_ORIGINS للقيم المحلية.

المرحلة 3، تشغيل الخادم
- تشغيل src/api/main.py على المنفذ 8000.
- مراقبة الإقلاع وعدد الراوترات المسجلة في السجلات.

المرحلة 4، اختبارات أساسية
- طلب GET /health والتحقق من الاستجابة.
- فتح /docs والتحقق من OpenAPI.

المرحلة 5، اختبارات المصادقة
- محاولة الوصول بدون X-API-Key، توقع 401.
- استخدام dev-test-key، توقع نجاح.
- اختبار خطأ صلاحيات عند نقص الإذن.

المرحلة 6، اختبارات System API
- GET /system/status، تحقق من psutil والقيم.
- GET /system/config، عند غياب الملف يرجع كائن فارغ.
- PUT /system/config ثم GET للتأكد من التخزين.
- GET /system/logs مع وبدون level.
- GET /system/stats، دمج performance و errors.
- POST /system/backup، إنشاء أرشيف في backups.
- POST /system/restore مع ملف غير موجود، توقع 404.
- DELETE /system/cache، تنظيف آمن.

المرحلة 7، اختبارات راوترات أساسية
- فحص نقاط الأساس للراوترات المسجلة دون عمليات ثقيلة.
- رصد الاستثناءات عبر المعالج العام.

المرحلة 8، إصلاحات فورية عند الفشل
- معالجة ImportError و FileNotFoundError بتحقق وجود الموارد قبل الاستخدام.
- توفير بدائل خفيفة للـ logger و error handler عند غياب api.utils.
- ضمان BASE_DIR صحيح.
- توحيد مسارات السجلات إلى logs عند الحاجة.
- حماية os.execv و sys.exit في نمط التطوير.

المرحلة 9، أتمتة التشغيل
- سكربت تشغيل محلي بإعداد المتغيرات وتشغيل الخادم.
- لاحقا، سكربت اختبارات سريعة عبر httpx إن تطلب الأمر.

تحديث الحالة
- سيتم تحديث هذا الملف بعد إتمام كل مرحلة.
